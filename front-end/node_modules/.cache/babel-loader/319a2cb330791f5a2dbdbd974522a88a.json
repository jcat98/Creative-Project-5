{"ast":null,"code":"var _jsxFileName = \"/usr/share/caddy/learning-mongo/lesson3/front-end/src/App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // setup state\n  const [posts, setPosts] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [problem, setProblem] = useState(\"\");\n  const fetchPosts = async () => {\n    try {\n      const response = await axios.get(\"/api/posts\");\n      setPosts(response.data.posts);\n    } catch (error) {\n      setError(\"error retrieving posts: \" + error);\n    }\n  };\n  const createPost = async () => {\n    try {\n      await axios.post(\"/api/posts\", {\n        problem: problem\n      });\n    } catch (error) {\n      setError(\"error adding a post: \" + error);\n    }\n  };\n  const deleteOnePost = async post => {\n    try {\n      await axios.delete(\"/api/posts/\" + post.id);\n    } catch (error) {\n      setError(\"error deleting a post\" + error);\n    }\n  };\n\n  // fetch ticket data\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n  const addPost = async e => {\n    e.preventDefault();\n    await createPost();\n    fetchPosts();\n    setProblem(\"\");\n  };\n  const deletePost = async post => {\n    await deleteOnePost(post);\n    fetchPosts();\n  };\n\n  // render results\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [error, /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"problem\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: post.problem\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => deletePost(post),\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)]\n    }, post.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Create a Ticket\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: addPost,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Problem:\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: problem,\n            onChange: e => setProblem(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"gfed4WjACKJIkcPPUcj9K/vBxe4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","axios","App","posts","setPosts","error","setError","problem","setProblem","fetchPosts","response","get","data","createPost","post","deleteOnePost","delete","id","addPost","e","preventDefault","deletePost","map","target","value"],"sources":["/usr/share/caddy/learning-mongo/lesson3/front-end/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\n\nfunction App() {\n  // setup state\n  const [posts, setPosts] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [problem, setProblem] = useState(\"\");\n\n  const fetchPosts = async() => {\n    try {      \n      const response = await axios.get(\"/api/posts\");\n      setPosts(response.data.posts);\n    } catch(error) {\n      setError(\"error retrieving posts: \" + error);\n    }\n  }\n  const createPost = async() => {\n    try {\n      await axios.post(\"/api/posts\", {problem: problem});\n    } catch(error) {\n      setError(\"error adding a post: \" + error);\n    }\n  }\n  const deleteOnePost = async(post) => {\n    try {\n      await axios.delete(\"/api/posts/\" + post.id);\n    } catch(error) {\n      setError(\"error deleting a post\" + error);\n    }\n  }\n\n  // fetch ticket data\n  useEffect(() => {\n    fetchPosts();\n  },[]);\n\n  const addPost = async(e) => {\n    e.preventDefault();\n    await createPost();\n    fetchPosts();\n    setProblem(\"\");\n  }\n\n  const deletePost = async(post) => {\n    await deleteOnePost(post);\n    fetchPosts();\n  }\n\n  // render results\n  return (\n    <div className=\"App\">\n      {error}\n      <h1>Posts</h1>\n      {posts.map( post => (\n        <div key={post.id} className=\"post\">\n          <div className=\"problem\">\n            <p>{post.problem}</p>\n          </div>\n          <button onClick={e => deletePost(post)}>Delete</button>\n        </div>\n      ))}\n      \n    <h1>Create a Ticket</h1>\n      <form onSubmit={addPost}>\n        <div>\n          <label>\n            Problem:\n            <textarea value={problem} onChange={e=>setProblem(e.target.value)}></textarea>\n          </label>\n        </div>\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}