{"ast":null,"code":"import _regeneratorRuntime from\"/usr/share/caddy/learning-mongo/lesson3/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/usr/share/caddy/learning-mongo/lesson3/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/usr/share/caddy/learning-mongo/lesson3/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Button from'react-bootstrap/Button';import Card from'react-bootstrap/Card';import Form from'react-bootstrap/Form';import Table from'react-bootstrap/Table';import axios from'axios';import'./Users.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Users=function Users(){// setup state\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),place=_useState8[0],setPlace=_useState8[1];var fetchUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/users\");case 3:response=_context.sent;setUsers(response.data.users);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setError(\"error retrieving users: \"+_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchUsers(){return _ref.apply(this,arguments);};}();var createUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"/api/users\",{username:username,place:place});case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);setError(\"error adding a user: \"+_context2.t0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function createUser(){return _ref2.apply(this,arguments);};}();var deleteOneUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(user){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/api/users/\"+user.id);case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);setError(\"error deleting a user\"+_context3.t0);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);}));return function deleteOneUser(_x){return _ref3.apply(this,arguments);};}();// fetch ticket data\nuseEffect(function(){fetchUsers();},[]);var addUser=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();_context4.next=3;return createUser();case 3:fetchUsers();setUsername(\"\");setPlace(\"\");case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function addUser(_x2){return _ref4.apply(this,arguments);};}();var deleteUser=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(user){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return deleteOneUser(user);case 2:fetchUsers();case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function deleteUser(_x3){return _ref5.apply(this,arguments);};}();// render results\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[error,/*#__PURE__*/_jsx(\"h1\",{children:\"Users\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Place\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.place}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{className:\"float-end\",variant:\"primary\",onClick:function onClick(e){return deleteUser(user);},children:\"Delete\"})})]});})})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Create a User\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:addUser,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"User\"}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlInput1\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);},placeholder:\"Secret Identity\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlInput2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Place\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:place,onChange:function onChange(e){return setPlace(e.target.value);},placeholder:\"State\"})]}),/*#__PURE__*/_jsx(Button,{className:\"float-end\",type:\"submit\",variant:\"primary\",children:\"Submit\"})]})]})})]})});};export default Users;","map":{"version":3,"names":["useState","useEffect","Button","Card","Form","Table","axios","Users","users","setUsers","error","setError","username","setUsername","place","setPlace","fetchUsers","get","response","data","createUser","post","deleteOneUser","user","delete","id","addUser","e","preventDefault","deleteUser","map","target","value"],"sources":["/usr/share/caddy/learning-mongo/lesson3/front-end/src/pages/Users.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport Form from 'react-bootstrap/Form';\nimport Table from 'react-bootstrap/Table';\nimport axios from 'axios';\nimport './Users.css';\n\nconst Users =() => {\n  // setup state\n  const [users, setUsers] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [place, setPlace] = useState(\"\");\n\n  const fetchUsers = async() => {\n    try {      \n      const response = await axios.get(\"/api/users\");\n      setUsers(response.data.users);\n    } catch(error) {\n      setError(\"error retrieving users: \" + error);\n    }\n  }\n  const createUser = async() => {\n    try {\n      await axios.post(\"/api/users\", {username: username, place: place});\n    } catch(error) {\n      setError(\"error adding a user: \" + error);\n    }\n  }\n  const deleteOneUser = async(user) => {\n    try {\n      await axios.delete(\"/api/users/\" + user.id);\n    } catch(error) {\n      setError(\"error deleting a user\" + error);\n    }\n  }\n\n  // fetch ticket data\n  useEffect(() => {\n    fetchUsers();\n  },[]);\n\n  const addUser = async(e) => {\n    e.preventDefault();\n    await createUser();\n    fetchUsers();\n    setUsername(\"\");\n    setPlace(\"\");\n  }\n\n  const deleteUser = async(user) => {\n    await deleteOneUser(user);\n    fetchUsers();\n  }\n\n  // render results\n  return (\n    <div className=\"container\">\n        <div className=\"App\">\n            {error}\n            <h1>Users</h1>\n            <Table striped bordered hover size=\"sm\">\n              <thead>\n                <tr>\n                  <th>Username</th>\n                  <th>Place</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                {users.map( user => (\n                  <tr>\n                    <td>{user.username}</td>\n                    <td>{user.place}</td>\n                    <td><Button className=\"float-end\" variant=\"primary\" onClick={e => deleteUser(user)}>Delete</Button></td>\n                  </tr>\n                ))}\n              </tbody>\n            </Table>\n            \n            <h1>Create a User</h1>\n            <form onSubmit={addUser}>\n            <Card>\n                <Card.Header>User</Card.Header>\n                <Card.Body>\n                    <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput1\">\n                        <Form.Label>Username</Form.Label>\n                        <Form.Control type=\"text\" value={username} onChange={e=>setUsername(e.target.value)} placeholder=\"Secret Identity\" />\n                    </Form.Group>\n                    <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput2\">\n                        <Form.Label>Place</Form.Label>\n                        <Form.Control type=\"text\" value={place} onChange={e=>setPlace(e.target.value)} placeholder=\"State\" />\n                    </Form.Group>\n                    <Button className=\"float-end\" type=\"submit\" variant=\"primary\">Submit</Button>\n                </Card.Body>\n            </Card>\n            </form>\n        </div>\n    </div>\n  );\n}\n\nexport default Users;"],"mappings":"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"},"metadata":{},"sourceType":"module"}